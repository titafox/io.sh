# IONET 自动化脚本

好用点 star，幸福你我她～

## 简介

这是一个用于 IO.NET的自动化 Bash 脚本。它包括了一系列自动化任务，如环境检查、Docker 容器和镜像的管理、以及 IONET 二进制文件的启动。该脚本旨在简化 IONET 系统的部署和管理过程。尤其适合在国内挂梯子的情况下使用。

## 功能
- **全新装机一键幸福**：如果是新机器，只要将自己 user_id 在顶部常量中把USER_ID换成你自己的，会自动生成launch_binary_linux的执行命令。
- **随机延迟执行**：为了避免内网流量过大，脚本会在执行时随机延迟 0 到 30 分钟。
- **环境检查**：检查`jq`的依赖是否已安装，如果没有安装，则会自动安装。
- **Docker 容器和镜像管理**：停止并移除所有 Docker 容器和镜像，以确保环境干净。
- **运行环境准备**：创建必要的目录并下载 launch_binary_linux 二进制文件。
- **启动 IONET 二进制文件**：生成指定的参数启动 IONET 二进制文件。
- **执行日志记录**：记录执行日志，包括执行日期、用户 ID、设备 ID 和设备名称。


## 使用方法

1. 将脚本保存为 `io.sh`。
2. 赋予脚本执行权限：
   ```bash
   chmod +x io.sh
    ```
3. 执行脚本：
    ```bash
    ./io.sh
    ```
4. 通过计划任务自动执行：
这将会每隔 6 小时自动执行脚本 /var/ionet/io.sh，并传递参数 cron。请根据实际脚本的位置替换 /var/ionet/io.sh。
```6 小时是我们在大量使用的情况下的推荐值，但您可以根据自己的需求进行调整。```

```bash
crontab -e
```
在打开的文件中添加以下内容：
```bash
0 */6 * * * /var/ionet/io.sh cron
```
然后保存并退出编辑器。

## 注意事项
1. 确保 Docker 已正确安装并且当前用户有权限管理 Docker 容器和镜像。
2. 脚本中的 USER_ID 和 DEVICE_ID 应根据实际情况进行修改。
3. 在使用计划任务时，请确保脚本的路径正确无误。
4. 如果在国内使用，请提前挂好梯子。

## 版权
全体被 io.net 折磨的运维苦难者们


